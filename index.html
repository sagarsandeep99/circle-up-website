<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Game Night</title>
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        /* Custom font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            /* Hide scrollbars caused by canvas */
            overflow: hidden; 
        }

        /* Style for the 3D background canvas */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Place it behind all content */
        }

        /* Glassmorphism effect for cards and modal */
        .glass-effect {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 0.2);
        }

        /* Added enhancement for the main title */
        h1 {
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>

    <!-- Main Content -->
    <div class="relative min-h-screen flex flex-col items-center justify-center p-4">
        <h1 class="text-5xl md:text-7xl font-bold mb-4 text-center">Game Night</h1>
        <p class="text-xl text-gray-300 mb-12 text-center">Click a card to get your prompt!</p>

        <!-- Game Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-4xl">
            <!-- Dumb Charades Card -->
            <div id="charades-card" class="glass-effect rounded-2xl p-6 shadow-2xl transform transition-all duration-300 hover:scale-105 hover:shadow-cyan-500/30 cursor-pointer">
                <h2 class="text-3xl font-bold mb-3 text-cyan-300">Dumb Charades</h2>
                <p class="text-gray-200">Act it out! No words allowed. Get your team to guess the movie, person, or phrase.</p>
            </div>
            
            <!-- Pictionary Card -->
            <div id="pictionary-card" class="glass-effect rounded-2xl p-6 shadow-2xl transform transition-all duration-300 hover:scale-105 hover:shadow-pink-500/30 cursor-pointer">
                <h2 class="text-3xl font-bold mb-3 text-pink-300">Pictionary</h2>
                <p class="text-gray-200">Draw it out! Can your team guess what you're sketching before time runs out?</p>
            </div>
            
            <!-- Karaoke Card -->
            <div id="karaoke-card" class="glass-effect rounded-2xl p-6 shadow-2xl transform transition-all duration-300 hover:scale-105 hover:shadow-yellow-500/30 cursor-pointer">
                <h2 class="text-3xl font-bold mb-3 text-yellow-300">Karaoke</h2>
                <p class="text-gray-200">Sing it loud! Grab the mic (or a hairbrush) and give us your best performance.</p>
            </div>
        </div>
    </div>

    <!-- Modal for Game Prompt -->
    <div id="prompt-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden">
        <div class="glass-effect rounded-2xl p-8 shadow-2xl w-full max-w-md relative">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-300 hover:text-white text-3xl">&times;</button>
            <h2 id="modal-title" class="text-4xl font-bold mb-6 text-center">Game Time!</h2>
            <div class="bg-gray-900 rounded-lg p-6 min-h-[100px] flex items-center justify-center">
                <p id="modal-prompt" class="text-2xl font-medium text-center"></p>
            </div>
        </div>
    </div>

    <!-- 
      All JavaScript logic is in one place.
      We use type="module" for modern JavaScript features.
    -->
    <script type="module">
        // --- 3D Background Setup ---
        // 'THREE' is available globally from the script tag in the <head>
        let scene, camera, renderer, shapes;
        let targetMouse = new THREE.Vector2(); // To store mouse position

        function init3D() {
            // Scene
            scene = new THREE.Scene();

            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            // Renderer
            const canvas = document.getElementById('bg-canvas');
            if (!canvas) {
                console.error("Canvas element not found!");
                return;
            }
            renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Shapes
            shapes = [];
            const geometries = [
                new THREE.IcosahedronGeometry(0.5, 0), // Diamond
                new THREE.SphereGeometry(0.4, 16, 16)   // Ball
            ];
            // Use MeshNormalMaterial for a colorful, light-less effect
            const material = new THREE.MeshNormalMaterial(); 

            for (let i = 0; i < 150; i++) { // Increased number of shapes
                // Pick a random geometry
                const geometry = geometries[Math.floor(Math.random() * geometries.length)];
                const mesh = new THREE.Mesh(geometry, material);
                
                // Random positions (spread out a bit more)
                mesh.position.x = (Math.random() - 0.5) * 25;
                mesh.position.y = (Math.random() - 0.5) * 25;
                mesh.position.z = (Math.random() - 0.5) * 25;

                // Random scales
                const scale = 0.5 + Math.random() * 1.5;
                mesh.scale.set(scale, scale, scale);

                // Store speed for rotation and movement
                mesh.userData.speed = {
                    x: (Math.random() - 0.5) * 0.005,
                    y: (Math.random() - 0.5) * 0.005
                };

                shapes.push(mesh);
                scene.add(mesh);
            }

            // Handle window resize
            window.addEventListener('resize', onWindowResize, false);
            // Add mouse move listener for interaction
            document.addEventListener('mousemove', onDocumentMouseMove, false);

            animate();
        }

        // Mouse move handler
        function onDocumentMouseMove(event) {
            // Normalized device coordinates (-1 to +1)
            targetMouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            targetMouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Add camera interaction
            // Smoothly interpolate camera position towards mouse target
            camera.position.x = THREE.MathUtils.lerp(camera.position.x, targetMouse.x * 2, 0.05);
            camera.position.y = THREE.MathUtils.lerp(camera.position.y, targetMouse.y * 2, 0.05);
            // Always look at the center
            camera.lookAt(scene.position);


            // Animate shapes
            shapes.forEach(shape => {
                shape.rotation.x += shape.userData.speed.x;
                shape.rotation.y += shape.userData.speed.y;

                // Gently float around
                shape.position.x += shape.userData.speed.x * 0.5;
                shape.position.y += shape.userData.speed.y * 0.5;

                // Wrap around screen
                if (shape.position.y > 12) shape.position.y = -12;
                if (shape.position.y < -12) shape.position.y = 12;
                if (shape.position.x > 12) shape.position.x = -12;
                if (shape.position.x < -12) shape.position.x = 12;
            });
            
            renderer.render(scene, camera);
        }

        // Resize handler
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // --- Game Logic ---

        const prompts = {
            charades: [
                "The Matrix",
                "Spiderman",
                "Baking a cake",
                "Playing guitar",
                "Harry Potter",
                "Walking a dog",
                "Titanic",
                "Riding a rollercoaster",
                "Star Wars",
                "Brushing your teeth"
            ],
            pictionary: [
                "Eiffel Tower",
                "Pizza",
                "Kangaroo",
                "Computer",
                "Bicycle",
                "Sunflower",
                "Castle",
                "Octopus",
                "Pirate ship",
                "Popcorn"
            ],
            karaoke: [
                "Bohemian Rhapsody - Queen",
                "Dancing Queen - ABBA",
                "Don't Stop Me Now - Queen",
                "I Will Survive - Gloria Gaynor",
                "Wonderwall - Oasis",
                "Sweet Caroline - Neil Diamond",
                "Uptown Funk - Mark Ronson ft. Bruno Mars",
                "Single Ladies - BeyoncÃ©",
                "Happy - Pharrell Williams"
            ]
        };

        // Get elements
        const modal = document.getElementById('prompt-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalPrompt = document.getElementById('modal-prompt');
        const closeModalBtn = document.getElementById('close-modal');

        const charadesCard = document.getElementById('charades-card');
        const pictionaryCard = document.getElementById('pictionary-card');
        const karaokeCard = document.getElementById('karaoke-card');

        // Function to open modal
        function openModal(title, prompt, colorClass) {
            modalTitle.textContent = title;
            modalPrompt.textContent = prompt;
            modalTitle.className = `text-4xl font-bold mb-6 text-center ${colorClass}`; // Apply color
            modal.classList.remove('hidden');
        }

        // Function to close modal
        function closeModal() {
            modal.classList.add('hidden');
        }

        // Get random item from array
        function getRandomPrompt(game) {
            const list = prompts[game];
            return list[Math.floor(Math.random() * list.length)];
        }

// --- Event Listeners ---
        // We add these listeners *after* defining the functions
        
        charadesCard.addEventListener('click', () => {
            openModal('Dumb Charades', getRandomPrompt('charades'), 'text-cyan-300');
        });

        pictionaryCard.addEventListener('click', () => {
            openModal('Pictionary', getRandomPrompt('pictionary'), 'text-pink-300');
        });

        karaokeCard.addEventListener('click', () => {
            openModal('Karaoke', getRandomPrompt('karaoke'), 'text-yellow-300');
        });

        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            // Close if clicking on the background overlay
            if (e.target === modal) {
                closeModal();
            }
        });

        // --- Start Everything ---
        // This line runs the 3D setup function once the script loads.
        // Since the script is at the end of the <body>, all HTML elements
        // (like the canvas) are guaranteed to exist.
        init3D();

    </script>
</body>
</html>